<?xml version="1.0" encoding="UTF-8"?><unload unload_date="2018-01-17 13:32:44"><sys_remote_update_set><application display_value="Global">global</application><application_name>Global</application_name><application_scope>global</application_scope><application_version/><collisions/><commit_date/><deleted/><description/><inserted/><name>ReplaceOnUpdate_CP</name><origin_sys_id/><release_date/><remote_sys_id>396b5228dba14f00497856f3ce961976</remote_sys_id><state>loaded</state><summary/><sys_class_name>sys_remote_update_set</sys_class_name><sys_created_by>brent.llewellyn</sys_created_by><sys_created_on>2018-01-17 13:32:44</sys_created_on><sys_id>4cbcd150db33c300497856f3ce96196b</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>brent.llewellyn</sys_updated_by><sys_updated_on>2018-01-17 13:32:44</sys_updated_on><update_set/><update_source/><updated/></sys_remote_update_set><sys_update_xml><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_script_include_e076aaacdba14f00497856f3ce96191f</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;global.replaceOnUpgradUtils&lt;/api_name&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;replaceOnUpgradUtils&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var replaceOnUpgradUtils = Class.create();
replaceOnUpgradUtils.prototype = {
	initialize: function() {
	},
	
	type: 'replaceOnUpgradUtils'
};

replaceOnUpgradUtils.userCanRun = function(){
	var iCanRun = false;
	
	// Determine if user in in appropriate Role
	var rolesArr = gs.getProperty('rop.availableToRoles').split(',');
	for (var role in rolesArr){
		if(gs.hasRole(rolesArr[role])){
			iCanRun = true;
			break;
		}
	}
	if(!iCanRun){
		// Determine if user is able to access the action
		var userArr = gs.getProperty('rop.availableToUsers').split(',');
		for (var user in userArr){
			if(gs.getUserID() == userArr[user]){
				iCanRun = true;
				break;
			}
		}
	}
	return iCanRun;
};

replaceOnUpgradUtils.runsOnThisTable = function(form_gr){
	var runOnTable = false;
	
	// Determine if user in in appropriate Role
	var tableRec = new GlideRecord('sys_db_object');
	tableRec.get('name',form_gr.sys_class_name);
		if(tableRec.super_class == 'daac0011db000300497856f3ce961954'){
			runOnTable = true;
		}
	
	return runOnTable;
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;brent.llewellyn&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-09-28 17:27:44&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;e076aaacdba14f00497856f3ce96191f&lt;/sys_id&gt;&lt;sys_mod_count&gt;3&lt;/sys_mod_count&gt;&lt;sys_name&gt;replaceOnUpgradUtils&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_e076aaacdba14f00497856f3ce96191f&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;brent.llewellyn&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2017-09-28 17:41:25&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><remote_update_set display_value="ReplaceOnUpdate_CP">4cbcd150db33c300497856f3ce96196b</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>brent.llewellyn</sys_created_by><sys_created_on>2018-01-17 13:32:44</sys_created_on><sys_id>08bcd150db33c300497856f3ce96196c</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>brent.llewellyn</sys_updated_by><sys_updated_on>2018-01-17 13:32:44</sys_updated_on><table/><target_name>replaceOnUpgradUtils</target_name><type>Script Include</type><update_domain>global</update_domain><update_set/><view/></sys_update_xml><sys_update_xml><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_properties_bb44aa6cdba14f00497856f3ce961962</name><payload><![CDATA[<record_update table="sys_properties"><sys_properties action="INSERT_OR_UPDATE"><choices/><description>Comma seperated list of roles</description><ignore_cache>false</ignore_cache><is_private>false</is_private><name>rop.availableToRoles</name><read_roles/><suffix/><sys_class_name>sys_properties</sys_class_name><sys_created_by>brent.llewellyn</sys_created_by><sys_created_on>2017-09-28 17:14:17</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>bb44aa6cdba14f00497856f3ce961962</sys_id><sys_mod_count>3</sys_mod_count><sys_name>rop.availableToRoles</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>sys_properties_bb44aa6cdba14f00497856f3ce961962</sys_update_name><sys_updated_by>brent.llewellyn</sys_updated_by><sys_updated_on>2017-09-28 17:59:26</sys_updated_on><type>string</type><value>admin</value><write_roles/></sys_properties><sys_translated_text action="delete_multiple" query="documentkey=bb44aa6cdba14f00497856f3ce961962"/></record_update>]]></payload><remote_update_set display_value="ReplaceOnUpdate_CP">4cbcd150db33c300497856f3ce96196b</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>brent.llewellyn</sys_created_by><sys_created_on>2018-01-17 13:32:44</sys_created_on><sys_id>44bcd150db33c300497856f3ce96196c</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>brent.llewellyn</sys_updated_by><sys_updated_on>2018-01-17 13:32:44</sys_updated_on><table/><target_name>rop.availableToRoles</target_name><type>System Property</type><update_domain>global</update_domain><update_set/><view/></sys_update_xml><sys_update_xml><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_properties_9cd76e6cdba14f00497856f3ce961937</name><payload><![CDATA[<record_update table="sys_properties"><sys_properties action="INSERT_OR_UPDATE"><choices/><description>Comma seperated list of users sys_id's</description><ignore_cache>false</ignore_cache><is_private>false</is_private><name>rop.availableToUsers</name><read_roles/><suffix/><sys_class_name>sys_properties</sys_class_name><sys_created_by>brent.llewellyn</sys_created_by><sys_created_on>2017-09-28 17:18:12</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>9cd76e6cdba14f00497856f3ce961937</sys_id><sys_mod_count>2</sys_mod_count><sys_name>rop.availableToUsers</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>sys_properties_9cd76e6cdba14f00497856f3ce961937</sys_update_name><sys_updated_by>brent.llewellyn</sys_updated_by><sys_updated_on>2017-09-28 18:00:24</sys_updated_on><type>string</type><value/><write_roles/></sys_properties><sys_translated_text action="delete_multiple" query="documentkey=9cd76e6cdba14f00497856f3ce961937"/></record_update>]]></payload><remote_update_set display_value="ReplaceOnUpdate_CP">4cbcd150db33c300497856f3ce96196b</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>brent.llewellyn</sys_created_by><sys_created_on>2018-01-17 13:32:44</sys_created_on><sys_id>80bcd150db33c300497856f3ce96196c</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>brent.llewellyn</sys_updated_by><sys_updated_on>2018-01-17 13:32:44</sys_updated_on><table/><target_name>rop.availableToUsers</target_name><type>System Property</type><update_domain>global</update_domain><update_set/><view/></sys_update_xml><sys_update_xml><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_ui_action_2a4e56a8dba14f00497856f3ce961904</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_ui_action"&gt;&lt;sys_ui_action action="INSERT_OR_UPDATE"&gt;&lt;action_name&gt;do_not_replace_on_upgrade&lt;/action_name&gt;&lt;active&gt;true&lt;/active&gt;&lt;client&gt;false&lt;/client&gt;&lt;comments&gt;Use this UI Action to force any record to be over written during a future upgrade&lt;/comments&gt;&lt;condition&gt;replaceOnUpgradUtils.runsOnThisTable(current) &amp;amp;&amp;amp; replaceOnUpgradUtils.userCanRun() &amp;amp;&amp;amp; current. sys_replace_on_upgrade==true&lt;/condition&gt;&lt;form_action&gt;true&lt;/form_action&gt;&lt;form_button&gt;false&lt;/form_button&gt;&lt;form_context_menu&gt;false&lt;/form_context_menu&gt;&lt;form_link&gt;true&lt;/form_link&gt;&lt;hint/&gt;&lt;list_action&gt;false&lt;/list_action&gt;&lt;list_banner_button&gt;false&lt;/list_banner_button&gt;&lt;list_button&gt;false&lt;/list_button&gt;&lt;list_choice&gt;false&lt;/list_choice&gt;&lt;list_context_menu&gt;false&lt;/list_context_menu&gt;&lt;list_link&gt;false&lt;/list_link&gt;&lt;list_save_with_form_button&gt;false&lt;/list_save_with_form_button&gt;&lt;name&gt;Do not Replace on Upgrade&lt;/name&gt;&lt;onclick/&gt;&lt;order&gt;100&lt;/order&gt;&lt;script&gt;&lt;![CDATA[doNotReplaceOnUpgrade();

function doNotReplaceOnUpgrade(){
	current.sys_replace_on_upgrade = false;
	current.update();
	gs.addErrorMessage('This record will be skipped during the next upgrade.');
	gs.addErrorMessage('To undo this change use the "Replace on Upgrade" ui action.');
	
	//Get current URL for return
	var url = GlideSession.get().getStack().bottom();
	action.setRedirectURL(url);
}]]&gt;&lt;/script&gt;&lt;show_insert&gt;false&lt;/show_insert&gt;&lt;show_multiple_update&gt;false&lt;/show_multiple_update&gt;&lt;show_query&gt;false&lt;/show_query&gt;&lt;show_update&gt;true&lt;/show_update&gt;&lt;sys_class_name&gt;sys_ui_action&lt;/sys_class_name&gt;&lt;sys_created_by&gt;brent.llewellyn&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-09-28 16:36:34&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;2a4e56a8dba14f00497856f3ce961904&lt;/sys_id&gt;&lt;sys_mod_count&gt;10&lt;/sys_mod_count&gt;&lt;sys_name&gt;Do not Replace on Upgrade&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ui_action_2a4e56a8dba14f00497856f3ce961904&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;brent.llewellyn&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2017-09-28 17:50:33&lt;/sys_updated_on&gt;&lt;table&gt;global&lt;/table&gt;&lt;ui11_compatible&gt;true&lt;/ui11_compatible&gt;&lt;ui16_compatible&gt;false&lt;/ui16_compatible&gt;&lt;/sys_ui_action&gt;&lt;/record_update&gt;</payload><remote_update_set display_value="ReplaceOnUpdate_CP">4cbcd150db33c300497856f3ce96196b</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>brent.llewellyn</sys_created_by><sys_created_on>2018-01-17 13:32:44</sys_created_on><sys_id>8cbcd150db33c300497856f3ce96196c</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>brent.llewellyn</sys_updated_by><sys_updated_on>2018-01-17 13:32:44</sys_updated_on><table>global</table><target_name>Do not Replace on Upgrade</target_name><type>UI Action</type><update_domain>global</update_domain><update_set/><view/></sys_update_xml><sys_update_xml><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_ui_action_0bac9e28dba14f00497856f3ce961955</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_ui_action"&gt;&lt;sys_ui_action action="INSERT_OR_UPDATE"&gt;&lt;action_name&gt;replace_on_upgrade&lt;/action_name&gt;&lt;active&gt;true&lt;/active&gt;&lt;client&gt;false&lt;/client&gt;&lt;comments&gt;Use this UI Action to force any record to be over written during a future upgrade&lt;/comments&gt;&lt;condition&gt;replaceOnUpgradUtils.runsOnThisTable(current) &amp;amp;&amp;amp; replaceOnUpgradUtils.userCanRun() &amp;amp;&amp;amp; current.sys_replace_on_upgrade==false&lt;/condition&gt;&lt;form_action&gt;true&lt;/form_action&gt;&lt;form_button&gt;false&lt;/form_button&gt;&lt;form_context_menu&gt;false&lt;/form_context_menu&gt;&lt;form_link&gt;true&lt;/form_link&gt;&lt;hint/&gt;&lt;list_action&gt;false&lt;/list_action&gt;&lt;list_banner_button&gt;false&lt;/list_banner_button&gt;&lt;list_button&gt;false&lt;/list_button&gt;&lt;list_choice&gt;false&lt;/list_choice&gt;&lt;list_context_menu&gt;false&lt;/list_context_menu&gt;&lt;list_link&gt;false&lt;/list_link&gt;&lt;list_save_with_form_button&gt;false&lt;/list_save_with_form_button&gt;&lt;name&gt;Replace on Upgrade&lt;/name&gt;&lt;onclick/&gt;&lt;order&gt;100&lt;/order&gt;&lt;script&gt;&lt;![CDATA[replaceOnUpgrade();

function replaceOnUpgrade(){
	current.sys_replace_on_upgrade = true;
	current.update();
	gs.addErrorMessage('This record will be overwritten during the next upgrade.');
	gs.addErrorMessage('To undo this change use the "Do not Replace on Upgrade" ui action.');
	
	//Get current URL for return
	var url = GlideSession.get().getStack().bottom();
	action.setRedirectURL(url);
}]]&gt;&lt;/script&gt;&lt;show_insert&gt;false&lt;/show_insert&gt;&lt;show_multiple_update&gt;false&lt;/show_multiple_update&gt;&lt;show_query&gt;false&lt;/show_query&gt;&lt;show_update&gt;true&lt;/show_update&gt;&lt;sys_class_name&gt;sys_ui_action&lt;/sys_class_name&gt;&lt;sys_created_by&gt;brent.llewellyn&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-09-28 16:29:29&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;0bac9e28dba14f00497856f3ce961955&lt;/sys_id&gt;&lt;sys_mod_count&gt;24&lt;/sys_mod_count&gt;&lt;sys_name&gt;Replace on Upgrade&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ui_action_0bac9e28dba14f00497856f3ce961955&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;brent.llewellyn&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2017-09-28 18:02:26&lt;/sys_updated_on&gt;&lt;table&gt;global&lt;/table&gt;&lt;ui11_compatible&gt;true&lt;/ui11_compatible&gt;&lt;ui16_compatible&gt;false&lt;/ui16_compatible&gt;&lt;/sys_ui_action&gt;&lt;/record_update&gt;</payload><remote_update_set display_value="ReplaceOnUpdate_CP">4cbcd150db33c300497856f3ce96196b</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>brent.llewellyn</sys_created_by><sys_created_on>2018-01-17 13:32:44</sys_created_on><sys_id>c8bcd150db33c300497856f3ce96196c</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>brent.llewellyn</sys_updated_by><sys_updated_on>2018-01-17 13:32:44</sys_updated_on><table>global</table><target_name>Replace on Upgrade</target_name><type>UI Action</type><update_domain>global</update_domain><update_set/><view/></sys_update_xml></unload>